import path from "path"
import { getAllProductImages } from "./functions/images/getAllProductImages";
import { getProductBySku } from "./functions/products/getProductBySKU";
import { updateProduct } from "./functions/products/updateProduct";
import { output } from "./scripts/utils/output";

const bundles = [
  { bundle_sku: "20500" },
  { bundle_sku: "20502" },
  { bundle_sku: "20503" },
  { bundle_sku: "20522" },
  { bundle_sku: "20529" },
  { bundle_sku: "20632" },
  { bundle_sku: "20634" },
  { bundle_sku: "20664" },
  { bundle_sku: "20665" },
  { bundle_sku: "20681" },
  { bundle_sku: "20821" },
  { bundle_sku: "20822" },
  { bundle_sku: "20823" },
  { bundle_sku: "20824" },
  { bundle_sku: "20825" },
  { bundle_sku: "20826" },
  { bundle_sku: "20827" },
  { bundle_sku: "20828" },
  { bundle_sku: "20836" },
  { bundle_sku: "20837" },
  { bundle_sku: "20840" },
  { bundle_sku: "20841" },
  { bundle_sku: "20844" },
  { bundle_sku: "20845" },
  { bundle_sku: "20846" },
  { bundle_sku: "20847" },
  { bundle_sku: "20848" },
  { bundle_sku: "20849" },
  { bundle_sku: "20850" },
  { bundle_sku: "20851" },
  { bundle_sku: "20852" },
  { bundle_sku: "20853" },
  { bundle_sku: "20854" },
  { bundle_sku: "20855" },
  { bundle_sku: "20856" },
  { bundle_sku: "20857" },
  { bundle_sku: "20858" },
  { bundle_sku: "20859" },
  { bundle_sku: "20860" },
  { bundle_sku: "20861" },
  { bundle_sku: "20862" },
  { bundle_sku: "20863" },
  { bundle_sku: "20866" },
  { bundle_sku: "20867" },
  { bundle_sku: "20868" },
  { bundle_sku: "20869" },
  { bundle_sku: "20870" },
  { bundle_sku: "20871" },
  { bundle_sku: "20872" },
  { bundle_sku: "20873" },
  { bundle_sku: "20874" },
  { bundle_sku: "20875" },
  { bundle_sku: "20876" },
  { bundle_sku: "20877" },
  { bundle_sku: "20878" },
  { bundle_sku: "20879" },
  { bundle_sku: "20880" },
  { bundle_sku: "20881" },
  { bundle_sku: "20882" },
  { bundle_sku: "20883" },
  { bundle_sku: "20884" },
  { bundle_sku: "20885" },
  { bundle_sku: "20886" },
  { bundle_sku: "20887" },
  { bundle_sku: "20888" },
  { bundle_sku: "20889" },
  { bundle_sku: "20890" },
  { bundle_sku: "20891" },
  { bundle_sku: "20892" },
  { bundle_sku: "20893" },
  { bundle_sku: "20894" },
  { bundle_sku: "20895" },
  { bundle_sku: "20896" },
  { bundle_sku: "20897" },
  { bundle_sku: "20898" },
  { bundle_sku: "20899" },
  { bundle_sku: "20900" },
  { bundle_sku: "20901" },
  { bundle_sku: "20902" },
  { bundle_sku: "20903" },
  { bundle_sku: "20904" },
  { bundle_sku: "20905" },
  { bundle_sku: "20906" },
  { bundle_sku: "20907" },
  { bundle_sku: "20908" },
  { bundle_sku: "20909" },
  { bundle_sku: "20910" },
  { bundle_sku: "20911" },
  { bundle_sku: "20912" },
  { bundle_sku: "20913" },
  { bundle_sku: "20914" },
  { bundle_sku: "20915" },
  { bundle_sku: "20916" },
  { bundle_sku: "20929" },
  { bundle_sku: "20930" },
  { bundle_sku: "20931" },
  { bundle_sku: "20932" },
  { bundle_sku: "20933" },
  { bundle_sku: "20934" },
  { bundle_sku: "20935" },
  { bundle_sku: "20936" },
  { bundle_sku: "20937" },
  { bundle_sku: "20938" },
  { bundle_sku: "20940" },
  { bundle_sku: "20941" },
  { bundle_sku: "20942" },
  { bundle_sku: "20943" },
  { bundle_sku: "20944" },
  { bundle_sku: "20945" },
  { bundle_sku: "20946" },
  { bundle_sku: "20947" },
  { bundle_sku: "20948" },
  { bundle_sku: "20949" },
  { bundle_sku: "20950" },
  { bundle_sku: "20951" },
  { bundle_sku: "20952" },
  { bundle_sku: "20953" },
  { bundle_sku: "20954" },
  { bundle_sku: "20955" },
  { bundle_sku: "20956" },
  { bundle_sku: "20957" },
  { bundle_sku: "20958" },
  { bundle_sku: "20959" },
  { bundle_sku: "20960" },
  { bundle_sku: "20961" },
  { bundle_sku: "20962" },
  { bundle_sku: "20963" },
  { bundle_sku: "20964" },
  { bundle_sku: "20965" },
  { bundle_sku: "20966" },
  { bundle_sku: "20967" },
  { bundle_sku: "20968" },
  { bundle_sku: "20969" },
  { bundle_sku: "20970" },
  { bundle_sku: "20971" },
  { bundle_sku: "20978" },
  { bundle_sku: "20979" },
  { bundle_sku: "20980" },
  { bundle_sku: "20981" },
  { bundle_sku: "20982" },
  { bundle_sku: "20983" },
  { bundle_sku: "20984" },
  { bundle_sku: "20985" },
  { bundle_sku: "20986" },
  { bundle_sku: "20987" },
  { bundle_sku: "20988" },
  { bundle_sku: "20989" },
  { bundle_sku: "20990" },
  { bundle_sku: "20991" },
  { bundle_sku: "20992" },
  { bundle_sku: "20993" },
  { bundle_sku: "20994" },
  { bundle_sku: "20995" },
  { bundle_sku: "20996" },
  { bundle_sku: "20997" },
  { bundle_sku: "20998" },
  { bundle_sku: "20999" },
  { bundle_sku: "21000" },
  { bundle_sku: "21001" },
  { bundle_sku: "21002" },
  { bundle_sku: "21004" },
  { bundle_sku: "21005" },
  { bundle_sku: "21006" },
  { bundle_sku: "21007" },
  { bundle_sku: "21008" },
  { bundle_sku: "21009" },
  { bundle_sku: "21010" },
  { bundle_sku: "21011" },
  { bundle_sku: "21012" },
  { bundle_sku: "21013" },
  { bundle_sku: "21014" },
  { bundle_sku: "21015" },
  { bundle_sku: "21016" },
  { bundle_sku: "21017" },
  { bundle_sku: "21018" },
  { bundle_sku: "21019" },
  { bundle_sku: "21020" },
  { bundle_sku: "21021" },
  { bundle_sku: "21022" },
  { bundle_sku: "21023" },
  { bundle_sku: "21024" },
  { bundle_sku: "21025" },
  { bundle_sku: "21026" },
  { bundle_sku: "21027" },
  { bundle_sku: "21028" },
  { bundle_sku: "21029" },
  { bundle_sku: "21030" },
  { bundle_sku: "21031" },
  { bundle_sku: "21032" },
  { bundle_sku: "21033" },
  { bundle_sku: "21034" },
  { bundle_sku: "21035" },
  { bundle_sku: "21036" },
  { bundle_sku: "21037" },
  { bundle_sku: "21038" },
  { bundle_sku: "21039" },
  { bundle_sku: "21040" },
  { bundle_sku: "21041" },
  { bundle_sku: "21042" },
  { bundle_sku: "21043" },
  { bundle_sku: "21044" },
  { bundle_sku: "21045" },
  { bundle_sku: "21046" },
  { bundle_sku: "21047" },
  { bundle_sku: "21048" },
  { bundle_sku: "21049" },
  { bundle_sku: "21050" },
  { bundle_sku: "21051" },
  { bundle_sku: "21052" },
  { bundle_sku: "21053" },
  { bundle_sku: "21054" },
  { bundle_sku: "21055" },
  { bundle_sku: "21056" },
  { bundle_sku: "21059" },
  { bundle_sku: "21060" },
  { bundle_sku: "21061" },
  { bundle_sku: "21062" },
  { bundle_sku: "21063" },
  { bundle_sku: "21064" },
  { bundle_sku: "21065" },
  { bundle_sku: "21066" },
  { bundle_sku: "21067" },
  { bundle_sku: "21068" },
  { bundle_sku: "21069" },
  { bundle_sku: "21070" },
  { bundle_sku: "21071" },
  { bundle_sku: "21073" },
  { bundle_sku: "21074" },
  { bundle_sku: "21075" },
  { bundle_sku: "21081" },
  { bundle_sku: "21082" },
  { bundle_sku: "21083" },
  { bundle_sku: "21084" },
  { bundle_sku: "21085" },
  { bundle_sku: "21086" },
  { bundle_sku: "21087" },
  { bundle_sku: "21088" },
  { bundle_sku: "21089" },
  { bundle_sku: "21090" },
  { bundle_sku: "21092" },
  { bundle_sku: "21093" },
  { bundle_sku: "21094" },
  { bundle_sku: "21095" },
  { bundle_sku: "21096" },
  { bundle_sku: "21097" },
  { bundle_sku: "21098" },
  { bundle_sku: "21099" },
  { bundle_sku: "21100" },
  { bundle_sku: "21101" },
  { bundle_sku: "21102" },
  { bundle_sku: "21103" },
  { bundle_sku: "21104" },
  { bundle_sku: "21105" },
  { bundle_sku: "21106" },
  { bundle_sku: "21107" },
  { bundle_sku: "21108" },
  { bundle_sku: "21109" },
  { bundle_sku: "21110" },
  { bundle_sku: "21111" },
  { bundle_sku: "21112" },
  { bundle_sku: "21113" },
  { bundle_sku: "21114" },
  { bundle_sku: "21115" },
  { bundle_sku: "21116" },
  { bundle_sku: "21117" },
  { bundle_sku: "21118" },
  { bundle_sku: "21120" },
  { bundle_sku: "21121" },
  { bundle_sku: "21122" },
  { bundle_sku: "21123" },
  { bundle_sku: "21124" },
  { bundle_sku: "21125" },
  { bundle_sku: "21126" },
  { bundle_sku: "21127" },
  { bundle_sku: "21129" },
  { bundle_sku: "21130" },
  { bundle_sku: "21131" },
  { bundle_sku: "21132" },
  { bundle_sku: "21133" },
  { bundle_sku: "21134" },
  { bundle_sku: "21135" },
  { bundle_sku: "21136" },
  { bundle_sku: "21137" },
  { bundle_sku: "21138" },
  { bundle_sku: "21139" },
  { bundle_sku: "21140" },
  { bundle_sku: "21141" },
];

const setLive: {
    bundle_sku: string;
}[]  = []

async function test() {
  try {
    require("./config/config").config("bf");
    for (let i = 0; i < bundles.length; i++) {
      const product = await getProductBySku(bundles[i].bundle_sku);
      if (!product) {
        console.log(`no product for ${bundles[i].bundle_sku}`);
        continue;
      }
      const images = await getAllProductImages(product.id);
      if (!images.length) {
        console.log(`no images for ${bundles[i].bundle_sku}`);
        continue;
      }
      await updateProduct(product.id, { is_visible: true });
      console.log(`LIVE: https://beautyfeatures.ie` + product.custom_url.url);
      setLive.push(bundles[i])
    }
    await output(path.resolve(__dirname, "bundles-set-live.csv"), setLive, true)
  } catch (err) {
    console.log(err);
  }
}
test();
